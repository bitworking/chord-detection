(this["webpackJsonpchord-detection"]=this["webpackJsonpchord-detection"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a,s=n(0),r=n.n(s),c=n(8),o=n.n(c),i=(n(16),n(1)),u=n(2),m=n.n(u),l=n(4),b=function(e){var t=e.onMessage,n=e.onConnect,a=e.onDisconnect,c=Object(s.useState)([]),o=Object(i.a)(c,2),u=o[0],b=o[1],d=Object(s.useState)(0),f=Object(i.a)(d,2),v=f[0],k=f[1],h=Object(s.useState)(!1),g=Object(i.a)(h,2),j=g[0],p=g[1];Object(s.useEffect)((function(){Object(l.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.requestMIDIAccess();case 2:t=e.sent,(n=function(){var e=t.inputs.values();b(Array.from(e))})(),t.onstatechange=function(){n()};case 6:case"end":return e.stop()}}),e)})))()}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{onChange:function(e){return k(parseInt(e.currentTarget.value,10))},defaultValue:v,disabled:j},u.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)}))),r.a.createElement("button",{onClick:function(){j?(u[v].onmidimessage=function(){},p(!1),a&&a()):(n&&n(),p(!0),t&&(u[v].onmidimessage=function(e){return t(e.data)}))}},j?"Disconnect USB MIDI":"Connect USB MIDI"))},d="03b80e5a-ede8-4b33-a751-6ce34ec4c700",f=function(){var e=Object(l.a)(m.a.mark((function e(t){var n,s,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.bluetooth.requestDevice({filters:[{services:[d]}],optionalServices:[d]});case 3:if(c=e.sent,null===(n=c.gatt)||void 0===n?void 0:n.connected){e.next=10;break}return e.next=7,null===(s=c.gatt)||void 0===s?void 0:s.connect();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=c.gatt;case 11:return a=e.t0,e.next=14,null===(r=a)||void 0===r?void 0:r.getPrimaryService(d);case 14:(o=e.sent)&&v(o,"7772e5db-3868-4112-a1a9-f2669d106bf3",t),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),console.error(e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(m.a.mark((function e(t,n,a){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getCharacteristic(n);case 3:return s=e.sent,e.next=6,s.startNotifications();case 6:s.addEventListener("characteristicvaluechanged",(function(e){return k(e.currentTarget.value,a)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(e,t){if(3!==e.buffer.byteLength||254!==e.getUint8(2)){for(var n=new Uint8Array(3),a=2;a<e.buffer.byteLength;a++)n[a-2]=e.getUint8(a);t&&t(n)}},h=function(e){var t=e.onMessage,n=e.onConnect,c=e.onDisconnect,o=Object(s.useState)(!1),u=Object(i.a)(o,2),m=u[0],l=u[1],b=function(){m?(!function(){var e;(null===(e=a)||void 0===e?void 0:e.connected)&&a.disconnect()}(),l(!1),c&&c()):(n&&n(),l(!0),f(t))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return b()}},m?"Disconnect Bluetooth MIDI":"Connect Bluetooth MIDI"))},g=n(6),j=n(9),p=n(10),E=function(){function e(t){Object(j.a)(this,e),this.data=void 0,this.notes=void 0,this.data=t,this.notes=["C","D\u266d","D","E\u266d","E","F","G\u266d","G","A\u266d","A","B\u266d","B"]}return Object(p.a)(e,[{key:"run",value:function(e){var t=this,n=e.sort((function(e,t){return e-t})),a=n[0],s=this.getChords(n,a).filter((function(e,t,n){return n.indexOf(e)===t})),r=n.slice(1),c=this.getChords(r,a).filter((function(e,n,a){return!(a.indexOf(e)!==n)&&!t.chordExists(s,e)}));return{chords:s,slashedChords:c}}},{key:"chordExists",value:function(e,t){return e.some((function(e){return e===t}))}},{key:"getChords",value:function(e,t){var n=this;return this.getNoteInversions(e).reduce((function(e,a){var s=n.getRootNote(a),r=n.normalizeNotes(a,s),c=n.getPossibleChords(r,s,t%12);return e.concat(c)}),[])}},{key:"getNoteInversions",value:function(e){return e.reduce((function(t,n,a){return a?[].concat(Object(g.a)(t),[[].concat(Object(g.a)(t[a-1].slice(1)),[t[a-1][0]])]):[e]}),[])}},{key:"getRootNote",value:function(e){return e[0]%12}},{key:"normalizeNotes",value:function(e,t){var n=new Set;return e.forEach((function(e){n.add((e-t)%12)})),Array.from(n).sort((function(e,t){return e-t}))}},{key:"getPossibleChords",value:function(e,t,n){var a=e.reduce((function(e,t,n,a){if(0===n)return"1";var s=t-a[n-1]-1;return"".concat(e).concat("0".repeat(s),"1")}),"");a=a.padEnd(12,"0");var s=parseInt(a,2);if(isNaN(s))return[];var r=this.notes[t],c="undefined"!==typeof n?this.notes[n]:null;return this.data.reduce((function(e,t){if((s&t.mask)===t.bits){var n="".concat(r," ").concat(t.name);return c&&c!==r&&(n+=" / ".concat(c)),e.concat(n)}return e}),[])}}]),e}(),O=(n(18),new Set),y=new E([{name:"",mask:4095,bits:2192},{name:"maj7",mask:4079,bits:2177},{name:"maj9",mask:4079,bits:2689},{name:"maj11",mask:3567,bits:2241},{name:"maj13",mask:3503,bits:2181},{name:"6",mask:4079,bits:2180},{name:"6/9",mask:4079,bits:2692},{name:"maj\u266f11",mask:3562,bits:2208},{name:"maj7\u266d6",mask:3502,bits:2184},{name:"7",mask:4079,bits:2178},{name:"9",mask:4079,bits:2690},{name:"11",mask:3567,bits:2242},{name:"13",mask:3503,bits:2182},{name:"7\u266f11",mask:3563,bits:2210},{name:"7\u266d9",mask:3791,bits:3202},{name:"13\u266d9",mask:3791,bits:3206},{name:"7\u266f9",mask:4079,bits:2434},{name:"alt7",mask:2775,bits:2178},{name:"sus4",mask:4079,bits:2112},{name:"sus2",mask:4079,bits:2560},{name:"7sus4",mask:4079,bits:2114},{name:"9sus4",mask:4079,bits:2626},{name:"\u266d9sus",mask:4079,bits:3136},{name:"-",mask:4095,bits:2320},{name:"-7",mask:4079,bits:2306},{name:"-maj7",mask:3555,bits:2305},{name:"-6",mask:4079,bits:2308},{name:"-9",mask:4079,bits:2818},{name:"-11",mask:3567,bits:2370},{name:"-13",mask:3503,bits:2310},{name:"\xb0",mask:4095,bits:2336},{name:"\xb07",mask:4095,bits:2340},{name:"-7\u266d5",mask:2491,bits:2338},{name:"(no 3rd)",mask:4095,bits:2064},{name:"(no 3rd)maj7",mask:4095,bits:2065},{name:"(no 3rd)maj9",mask:4095,bits:2577},{name:"(no 3rd)7",mask:4095,bits:2066},{name:"(no 3rd)9",mask:4095,bits:2578},{name:"+",mask:4095,bits:2184},{name:"maj7\u266f5",mask:4095,bits:2185},{name:"maj7\u266f4",mask:4079,bits:2721},{name:"7\u266f5",mask:4095,bits:2186},{name:"7\u266f9",mask:4079,bits:2434},{name:"\u266d9sus",mask:4079,bits:3138},{name:"alt",mask:4079,bits:3498},{name:"add9",mask:4079,bits:2688},{name:"-add9",mask:4079,bits:2816}]),w=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)([]),o=Object(i.a)(c,2),u=o[0],m=o[1],l=function(e){144===e[0]&&e[2]>0?(O.add(e[1]),d(O)):(128===e[0]||144===e[0]&&0===e[2])&&(O.delete(e[1]),d(O))},d=function(e){var t=Array.from(e);if(t.length<2)return a([]),void m([]);var n=y.run(t);a(n.chords),m(n.slashedChords)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"controls"},r.a.createElement(b,{onMessage:l})),r.a.createElement("div",{className:"controls"},r.a.createElement(h,{onMessage:l})),r.a.createElement("div",{className:"container-chords"},r.a.createElement("div",null,n.join("\n")),r.a.createElement("div",null,u.join("\n"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.6c8b5e94.chunk.js.map